<div class="product-grid table-container">
	<table>
		<caption ng-if="!vm.paginatedLineItems.items.length">{{'requisition.nonFullSupply.empty' | message}}</caption>
		<thead>
			<tr>
				<th class="col-{{column.name}}" ng-repeat="column in vm.columns | orderBy : 'displayOrder'" ng-class="{sticky: !column.$canChangeOrder}" popover="{{column.definition}}">{{column.label}}</th>
				<th ng-if="vm.displayDeleteColumn()"></th>
			</tr>
		</thead>
		<tbody ng-repeat="(category, lineItems) in vm.getCurrentPage() | groupBy:'$program.productCategoryDisplayName'" title="{{category}}">
			<tr ng-class="{'invalid-row': !vm.isLineItemValid(lineItem)}" ng-repeat="lineItem in lineItems | orderBy : 'orderableProduct.name'">
				<td ng-repeat="column in vm.columns | orderBy : 'displayOrder'"
					product-grid-cell requisition="vm.requisition" column="column" line-item="lineItem"></td>
				<td ng-if="vm.displayDeleteColumn()">
					<button class="hide-line-item" ng-click="vm.deleteLineItem(lineItem)" ng-if="lineItem.$deletable">
						<i class="fa fa-remove"></i>
					</button>
				</td>
			</tr>
		</tbody>
	</table>

	<button class="add-product" ng-if="vm.displayAddProductButton" ng-click="vm.addProduct()">
			{{'button.add' | message}}
	</button>
</div>
<openlmis-pagination ng-if="vm.paginatedLineItems.items.length" current-page="vm.currentPage"
	is-item-valid="vm.isLineItemValid"
	change-page="vm.changePage"
	paginated-items="vm.paginatedLineItems">
</openlmis-pagination>
